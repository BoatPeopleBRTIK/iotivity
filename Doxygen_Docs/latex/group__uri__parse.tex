\hypertarget{group__uri__parse}{}\section{U\+R\+I Parsing Functions}
\label{group__uri__parse}\index{U\+R\+I Parsing Functions@{U\+R\+I Parsing Functions}}
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structcoap__parse__iterator__t}{coap\+\_\+parse\+\_\+iterator\+\_\+t}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{structcoap__parse__iterator__t}{coap\+\_\+parse\+\_\+iterator\+\_\+t} $\ast$ \hyperlink{group__uri__parse_gaa794ada6b7c7c6c4009e153924f8e2f8}{coap\+\_\+parse\+\_\+iterator\+\_\+init} (unsigned char $\ast$s, size\+\_\+t n, unsigned char separator, unsigned char $\ast$delim, size\+\_\+t dlen, \hyperlink{structcoap__parse__iterator__t}{coap\+\_\+parse\+\_\+iterator\+\_\+t} $\ast$pi)
\item 
unsigned char $\ast$ \hyperlink{group__uri__parse_ga4c3bd9d741abdb8ea91792af2eb9dc14}{coap\+\_\+parse\+\_\+next} (\hyperlink{structcoap__parse__iterator__t}{coap\+\_\+parse\+\_\+iterator\+\_\+t} $\ast$pi)
\item 
int \hyperlink{group__uri__parse_gad92e0061b8752f304053f59f9da8b62d}{coap\+\_\+split\+\_\+uri} (unsigned char $\ast$str\+\_\+var, size\+\_\+t len, \hyperlink{structcoap__uri__t}{coap\+\_\+uri\+\_\+t} $\ast$uri)
\item 
int \hyperlink{group__uri__parse_gaf908e5dec2807e2591c9d4b7a2e1bdc9}{coap\+\_\+split\+\_\+path} (const unsigned char $\ast$s, size\+\_\+t length, unsigned char $\ast$buf, size\+\_\+t $\ast$buflen)
\item 
int \hyperlink{group__uri__parse_ga11af018953df7b74380791222cc115a5}{coap\+\_\+split\+\_\+query} (const unsigned char $\ast$s, size\+\_\+t length, unsigned char $\ast$buf, size\+\_\+t $\ast$buflen)
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Co\+A\+P P\+D\+Us contain normalized U\+R\+Is with their path and query split into multiple segments. The functions in this module help splitting strings. 

\subsection{Function Documentation}
\hypertarget{group__uri__parse_gaa794ada6b7c7c6c4009e153924f8e2f8}{}\index{U\+R\+I Parsing Functions@{U\+R\+I Parsing Functions}!coap\+\_\+parse\+\_\+iterator\+\_\+init@{coap\+\_\+parse\+\_\+iterator\+\_\+init}}
\index{coap\+\_\+parse\+\_\+iterator\+\_\+init@{coap\+\_\+parse\+\_\+iterator\+\_\+init}!U\+R\+I Parsing Functions@{U\+R\+I Parsing Functions}}
\subsubsection[{coap\+\_\+parse\+\_\+iterator\+\_\+init}]{\setlength{\rightskip}{0pt plus 5cm}{\bf coap\+\_\+parse\+\_\+iterator\+\_\+t}$\ast$ coap\+\_\+parse\+\_\+iterator\+\_\+init (
\begin{DoxyParamCaption}
\item[{unsigned char $\ast$}]{s, }
\item[{size\+\_\+t}]{n, }
\item[{unsigned char}]{separator, }
\item[{unsigned char $\ast$}]{delim, }
\item[{size\+\_\+t}]{dlen, }
\item[{{\bf coap\+\_\+parse\+\_\+iterator\+\_\+t} $\ast$}]{pi}
\end{DoxyParamCaption}
)}\label{group__uri__parse_gaa794ada6b7c7c6c4009e153924f8e2f8}
Initializes the given iterator {\ttfamily pi}.


\begin{DoxyParams}{Parameters}
{\em s} & The string to tokenize. \\
\hline
{\em n} & The length of {\ttfamily s}. \\
\hline
{\em separator} & The separator character that delimits tokens. \\
\hline
{\em delim} & A set of characters that delimit . \\
\hline
{\em dlen} & The length of {\ttfamily delim}. \\
\hline
{\em pi} & The iterator object to initialize.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The initialized iterator object {\ttfamily pi}. 
\end{DoxyReturn}
\hypertarget{group__uri__parse_ga4c3bd9d741abdb8ea91792af2eb9dc14}{}\index{U\+R\+I Parsing Functions@{U\+R\+I Parsing Functions}!coap\+\_\+parse\+\_\+next@{coap\+\_\+parse\+\_\+next}}
\index{coap\+\_\+parse\+\_\+next@{coap\+\_\+parse\+\_\+next}!U\+R\+I Parsing Functions@{U\+R\+I Parsing Functions}}
\subsubsection[{coap\+\_\+parse\+\_\+next}]{\setlength{\rightskip}{0pt plus 5cm}unsigned char$\ast$ coap\+\_\+parse\+\_\+next (
\begin{DoxyParamCaption}
\item[{{\bf coap\+\_\+parse\+\_\+iterator\+\_\+t} $\ast$}]{pi}
\end{DoxyParamCaption}
)}\label{group__uri__parse_ga4c3bd9d741abdb8ea91792af2eb9dc14}
Updates the iterator {\ttfamily pi} to point to the next token. This function returns a pointer to that token or {\ttfamily N\+U\+L\+L} if no more tokens exist. The contents of {\ttfamily pi} will be updated. In particular, {\ttfamily pi-\/$>$segment\+\_\+length} specifies the length of the current token, {\ttfamily pi-\/$>$pos} points to its beginning.


\begin{DoxyParams}{Parameters}
{\em pi} & The iterator to update.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The next token or {\ttfamily N\+U\+L\+L} if no more tokens exist. 
\end{DoxyReturn}
\hypertarget{group__uri__parse_gaf908e5dec2807e2591c9d4b7a2e1bdc9}{}\index{U\+R\+I Parsing Functions@{U\+R\+I Parsing Functions}!coap\+\_\+split\+\_\+path@{coap\+\_\+split\+\_\+path}}
\index{coap\+\_\+split\+\_\+path@{coap\+\_\+split\+\_\+path}!U\+R\+I Parsing Functions@{U\+R\+I Parsing Functions}}
\subsubsection[{coap\+\_\+split\+\_\+path}]{\setlength{\rightskip}{0pt plus 5cm}int coap\+\_\+split\+\_\+path (
\begin{DoxyParamCaption}
\item[{const unsigned char $\ast$}]{s, }
\item[{size\+\_\+t}]{length, }
\item[{unsigned char $\ast$}]{buf, }
\item[{size\+\_\+t $\ast$}]{buflen}
\end{DoxyParamCaption}
)}\label{group__uri__parse_gaf908e5dec2807e2591c9d4b7a2e1bdc9}
Splits the given U\+R\+I path into segments. Each segment is preceded by an option pseudo-\/header with delta-\/value 0 and the actual length of the respective segment after percent-\/decoding.


\begin{DoxyParams}{Parameters}
{\em s} & The path string to split. \\
\hline
{\em length} & The actual length of {\ttfamily s}. \\
\hline
{\em buf} & Result buffer for parsed segments. \\
\hline
{\em buflen} & Maximum length of {\ttfamily buf}. Will be set to the actual number of bytes written into buf on success.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The number of segments created or {\ttfamily -\/1} on error. 
\end{DoxyReturn}
\hypertarget{group__uri__parse_ga11af018953df7b74380791222cc115a5}{}\index{U\+R\+I Parsing Functions@{U\+R\+I Parsing Functions}!coap\+\_\+split\+\_\+query@{coap\+\_\+split\+\_\+query}}
\index{coap\+\_\+split\+\_\+query@{coap\+\_\+split\+\_\+query}!U\+R\+I Parsing Functions@{U\+R\+I Parsing Functions}}
\subsubsection[{coap\+\_\+split\+\_\+query}]{\setlength{\rightskip}{0pt plus 5cm}int coap\+\_\+split\+\_\+query (
\begin{DoxyParamCaption}
\item[{const unsigned char $\ast$}]{s, }
\item[{size\+\_\+t}]{length, }
\item[{unsigned char $\ast$}]{buf, }
\item[{size\+\_\+t $\ast$}]{buflen}
\end{DoxyParamCaption}
)}\label{group__uri__parse_ga11af018953df7b74380791222cc115a5}
Splits the given U\+R\+I query into segments. Each segment is preceded by an option pseudo-\/header with delta-\/value 0 and the actual length of the respective query term.


\begin{DoxyParams}{Parameters}
{\em s} & The query string to split. \\
\hline
{\em length} & The actual length of {\ttfamily s}. \\
\hline
{\em buf} & Result buffer for parsed segments. \\
\hline
{\em buflen} & Maximum length of {\ttfamily buf}. Will be set to the actual number of bytes written into buf on success.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The number of segments created or {\ttfamily -\/1} on error.
\end{DoxyReturn}
\begin{DoxyRefDesc}{Bug}
\item[\hyperlink{bug__bug000001}{Bug}]This function does not reserve additional space for delta $>$ 12. \end{DoxyRefDesc}
\hypertarget{group__uri__parse_gad92e0061b8752f304053f59f9da8b62d}{}\index{U\+R\+I Parsing Functions@{U\+R\+I Parsing Functions}!coap\+\_\+split\+\_\+uri@{coap\+\_\+split\+\_\+uri}}
\index{coap\+\_\+split\+\_\+uri@{coap\+\_\+split\+\_\+uri}!U\+R\+I Parsing Functions@{U\+R\+I Parsing Functions}}
\subsubsection[{coap\+\_\+split\+\_\+uri}]{\setlength{\rightskip}{0pt plus 5cm}int coap\+\_\+split\+\_\+uri (
\begin{DoxyParamCaption}
\item[{unsigned char $\ast$}]{str\+\_\+var, }
\item[{size\+\_\+t}]{len, }
\item[{{\bf coap\+\_\+uri\+\_\+t} $\ast$}]{uri}
\end{DoxyParamCaption}
)}\label{group__uri__parse_gad92e0061b8752f304053f59f9da8b62d}
Parses a given string into U\+R\+I components. The identified syntactic components are stored in the result parameter {\ttfamily uri}. Optional U\+R\+I components that are not specified will be set to \{ 0, 0 \}, except for the port which is set to {\ttfamily C\+O\+A\+P\+\_\+\+D\+E\+F\+A\+U\+L\+T\+\_\+\+P\+O\+R\+T}. This function returns {\ttfamily 0} if parsing succeeded, a value less than zero otherwise.


\begin{DoxyParams}{Parameters}
{\em str\+\_\+var} & The string to split up. \\
\hline
{\em len} & The actual length of {\ttfamily str\+\_\+var} \\
\hline
{\em uri} & The \hyperlink{structcoap__uri__t}{coap\+\_\+uri\+\_\+t} object to store the result. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
{\ttfamily 0} on success, or $<$ 0 on error.
\end{DoxyReturn}
\begin{DoxyNote}{Note}
The host name part will be converted to lower case by this function. 
\end{DoxyNote}
