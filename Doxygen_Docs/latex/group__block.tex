\hypertarget{group__block}{}\section{Block Transfer}
\label{group__block}\index{Block Transfer@{Block Transfer}}
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structcoap__block__t}{coap\+\_\+block\+\_\+t}
\end{DoxyCompactItemize}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{group__block_ga1a064effcefd02b9e5c8f99b297c0edc}{C\+O\+A\+P\+\_\+\+M\+A\+X\+\_\+\+B\+L\+O\+C\+K\+\_\+\+S\+Z\+X}~4
\item 
\#define \hyperlink{group__block_gad7d63d1ac6f4e326be162f5fb1ee48d9}{C\+O\+A\+P\+\_\+\+O\+P\+T\+\_\+\+B\+L\+O\+C\+K\+\_\+\+L\+A\+S\+T}(opt)~(\hyperlink{group__opt__filter_gad8982f51d2fb676d4b4be50487bb8590}{C\+O\+A\+P\+\_\+\+O\+P\+T\+\_\+\+L\+E\+N\+G\+T\+H}(opt) ? (\hyperlink{group__opt__filter_gac4348d760bb312fdc2f108ee3e8303a4}{C\+O\+A\+P\+\_\+\+O\+P\+T\+\_\+\+V\+A\+L\+U\+E}(opt) + (\hyperlink{group__opt__filter_gad8982f51d2fb676d4b4be50487bb8590}{C\+O\+A\+P\+\_\+\+O\+P\+T\+\_\+\+L\+E\+N\+G\+T\+H}(opt)-\/1)) \+: 0)
\item 
\#define \hyperlink{group__block_ga9e87e4bbd861945d9d1cc672c781662b}{C\+O\+A\+P\+\_\+\+O\+P\+T\+\_\+\+B\+L\+O\+C\+K\+\_\+\+M\+O\+R\+E}(opt)~(\hyperlink{group__opt__filter_gad8982f51d2fb676d4b4be50487bb8590}{C\+O\+A\+P\+\_\+\+O\+P\+T\+\_\+\+L\+E\+N\+G\+T\+H}(opt) ? ($\ast$\hyperlink{group__block_gad7d63d1ac6f4e326be162f5fb1ee48d9}{C\+O\+A\+P\+\_\+\+O\+P\+T\+\_\+\+B\+L\+O\+C\+K\+\_\+\+L\+A\+S\+T}(opt) \& 0x08) \+: 0)
\item 
\#define \hyperlink{group__block_ga3b14a086973dff06815f999b6c873429}{C\+O\+A\+P\+\_\+\+O\+P\+T\+\_\+\+B\+L\+O\+C\+K\+\_\+\+S\+Z\+X}(opt)~(\hyperlink{group__opt__filter_gad8982f51d2fb676d4b4be50487bb8590}{C\+O\+A\+P\+\_\+\+O\+P\+T\+\_\+\+L\+E\+N\+G\+T\+H}(opt) ? ($\ast$\hyperlink{group__block_gad7d63d1ac6f4e326be162f5fb1ee48d9}{C\+O\+A\+P\+\_\+\+O\+P\+T\+\_\+\+B\+L\+O\+C\+K\+\_\+\+L\+A\+S\+T}(opt) \& 0x07) \+: 0)
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
unsigned int \hyperlink{group__block_gaac6c90297abc6e2da80a6212b0d10e99}{coap\+\_\+opt\+\_\+block\+\_\+num} (const \hyperlink{option_8h_a351867e79474c96130f738fcfbc120cc}{coap\+\_\+opt\+\_\+t} $\ast$block\+\_\+opt)
\item 
int \hyperlink{group__block_ga265adcc610026896a5e8a046bcc359ca}{coap\+\_\+get\+\_\+block} (\hyperlink{structcoap__pdu__t}{coap\+\_\+pdu\+\_\+t} $\ast$pdu, unsigned short type, \hyperlink{structcoap__block__t}{coap\+\_\+block\+\_\+t} $\ast$block)
\item 
int \hyperlink{group__block_ga0750df07c7545ffade46ba6669aa5b54}{coap\+\_\+write\+\_\+block\+\_\+opt} (\hyperlink{structcoap__block__t}{coap\+\_\+block\+\_\+t} $\ast$block, unsigned short type, \hyperlink{structcoap__pdu__t}{coap\+\_\+pdu\+\_\+t} $\ast$pdu, size\+\_\+t data\+\_\+length)
\item 
int \hyperlink{group__block_ga44c746196920a4ea3cd6e2f5df78c046}{coap\+\_\+add\+\_\+block} (\hyperlink{structcoap__pdu__t}{coap\+\_\+pdu\+\_\+t} $\ast$pdu, unsigned int len, const unsigned char $\ast$data, unsigned int block\+\_\+num, unsigned char block\+\_\+szx)
\end{DoxyCompactItemize}


\subsection{Detailed Description}


\subsection{Macro Definition Documentation}
\hypertarget{group__block_ga1a064effcefd02b9e5c8f99b297c0edc}{}\index{Block Transfer@{Block Transfer}!C\+O\+A\+P\+\_\+\+M\+A\+X\+\_\+\+B\+L\+O\+C\+K\+\_\+\+S\+Z\+X@{C\+O\+A\+P\+\_\+\+M\+A\+X\+\_\+\+B\+L\+O\+C\+K\+\_\+\+S\+Z\+X}}
\index{C\+O\+A\+P\+\_\+\+M\+A\+X\+\_\+\+B\+L\+O\+C\+K\+\_\+\+S\+Z\+X@{C\+O\+A\+P\+\_\+\+M\+A\+X\+\_\+\+B\+L\+O\+C\+K\+\_\+\+S\+Z\+X}!Block Transfer@{Block Transfer}}
\subsubsection[{C\+O\+A\+P\+\_\+\+M\+A\+X\+\_\+\+B\+L\+O\+C\+K\+\_\+\+S\+Z\+X}]{\setlength{\rightskip}{0pt plus 5cm}\#define C\+O\+A\+P\+\_\+\+M\+A\+X\+\_\+\+B\+L\+O\+C\+K\+\_\+\+S\+Z\+X~4}\label{group__block_ga1a064effcefd02b9e5c8f99b297c0edc}
The largest value for the S\+Z\+X component in a Block option. Note that 1 $<$$<$ (C\+O\+A\+P\+\_\+\+M\+A\+X\+\_\+\+B\+L\+O\+C\+K\+\_\+\+S\+Z\+X + 4) should not exceed C\+O\+A\+P\+\_\+\+M\+A\+X\+\_\+\+P\+D\+U\+\_\+\+S\+I\+Z\+E. \hypertarget{group__block_gad7d63d1ac6f4e326be162f5fb1ee48d9}{}\index{Block Transfer@{Block Transfer}!C\+O\+A\+P\+\_\+\+O\+P\+T\+\_\+\+B\+L\+O\+C\+K\+\_\+\+L\+A\+S\+T@{C\+O\+A\+P\+\_\+\+O\+P\+T\+\_\+\+B\+L\+O\+C\+K\+\_\+\+L\+A\+S\+T}}
\index{C\+O\+A\+P\+\_\+\+O\+P\+T\+\_\+\+B\+L\+O\+C\+K\+\_\+\+L\+A\+S\+T@{C\+O\+A\+P\+\_\+\+O\+P\+T\+\_\+\+B\+L\+O\+C\+K\+\_\+\+L\+A\+S\+T}!Block Transfer@{Block Transfer}}
\subsubsection[{C\+O\+A\+P\+\_\+\+O\+P\+T\+\_\+\+B\+L\+O\+C\+K\+\_\+\+L\+A\+S\+T}]{\setlength{\rightskip}{0pt plus 5cm}\#define C\+O\+A\+P\+\_\+\+O\+P\+T\+\_\+\+B\+L\+O\+C\+K\+\_\+\+L\+A\+S\+T(
\begin{DoxyParamCaption}
\item[{}]{opt}
\end{DoxyParamCaption}
)~({\bf C\+O\+A\+P\+\_\+\+O\+P\+T\+\_\+\+L\+E\+N\+G\+T\+H}(opt) ? ({\bf C\+O\+A\+P\+\_\+\+O\+P\+T\+\_\+\+V\+A\+L\+U\+E}(opt) + ({\bf C\+O\+A\+P\+\_\+\+O\+P\+T\+\_\+\+L\+E\+N\+G\+T\+H}(opt)-\/1)) \+: 0)}\label{group__block_gad7d63d1ac6f4e326be162f5fb1ee48d9}
Returns the value of the least significant byte of a Block option {\ttfamily opt}. For zero-\/length options (i.\+e. num == m == szx == 0), C\+O\+A\+P\+\_\+\+O\+P\+T\+\_\+\+B\+L\+O\+C\+K\+\_\+\+L\+A\+S\+T returns {\ttfamily N\+U\+L\+L}. \hypertarget{group__block_ga9e87e4bbd861945d9d1cc672c781662b}{}\index{Block Transfer@{Block Transfer}!C\+O\+A\+P\+\_\+\+O\+P\+T\+\_\+\+B\+L\+O\+C\+K\+\_\+\+M\+O\+R\+E@{C\+O\+A\+P\+\_\+\+O\+P\+T\+\_\+\+B\+L\+O\+C\+K\+\_\+\+M\+O\+R\+E}}
\index{C\+O\+A\+P\+\_\+\+O\+P\+T\+\_\+\+B\+L\+O\+C\+K\+\_\+\+M\+O\+R\+E@{C\+O\+A\+P\+\_\+\+O\+P\+T\+\_\+\+B\+L\+O\+C\+K\+\_\+\+M\+O\+R\+E}!Block Transfer@{Block Transfer}}
\subsubsection[{C\+O\+A\+P\+\_\+\+O\+P\+T\+\_\+\+B\+L\+O\+C\+K\+\_\+\+M\+O\+R\+E}]{\setlength{\rightskip}{0pt plus 5cm}\#define C\+O\+A\+P\+\_\+\+O\+P\+T\+\_\+\+B\+L\+O\+C\+K\+\_\+\+M\+O\+R\+E(
\begin{DoxyParamCaption}
\item[{}]{opt}
\end{DoxyParamCaption}
)~({\bf C\+O\+A\+P\+\_\+\+O\+P\+T\+\_\+\+L\+E\+N\+G\+T\+H}(opt) ? ($\ast${\bf C\+O\+A\+P\+\_\+\+O\+P\+T\+\_\+\+B\+L\+O\+C\+K\+\_\+\+L\+A\+S\+T}(opt) \& 0x08) \+: 0)}\label{group__block_ga9e87e4bbd861945d9d1cc672c781662b}
Returns the value of the More-\/bit of a Block option {\ttfamily opt}. \hypertarget{group__block_ga3b14a086973dff06815f999b6c873429}{}\index{Block Transfer@{Block Transfer}!C\+O\+A\+P\+\_\+\+O\+P\+T\+\_\+\+B\+L\+O\+C\+K\+\_\+\+S\+Z\+X@{C\+O\+A\+P\+\_\+\+O\+P\+T\+\_\+\+B\+L\+O\+C\+K\+\_\+\+S\+Z\+X}}
\index{C\+O\+A\+P\+\_\+\+O\+P\+T\+\_\+\+B\+L\+O\+C\+K\+\_\+\+S\+Z\+X@{C\+O\+A\+P\+\_\+\+O\+P\+T\+\_\+\+B\+L\+O\+C\+K\+\_\+\+S\+Z\+X}!Block Transfer@{Block Transfer}}
\subsubsection[{C\+O\+A\+P\+\_\+\+O\+P\+T\+\_\+\+B\+L\+O\+C\+K\+\_\+\+S\+Z\+X}]{\setlength{\rightskip}{0pt plus 5cm}\#define C\+O\+A\+P\+\_\+\+O\+P\+T\+\_\+\+B\+L\+O\+C\+K\+\_\+\+S\+Z\+X(
\begin{DoxyParamCaption}
\item[{}]{opt}
\end{DoxyParamCaption}
)~({\bf C\+O\+A\+P\+\_\+\+O\+P\+T\+\_\+\+L\+E\+N\+G\+T\+H}(opt) ? ($\ast${\bf C\+O\+A\+P\+\_\+\+O\+P\+T\+\_\+\+B\+L\+O\+C\+K\+\_\+\+L\+A\+S\+T}(opt) \& 0x07) \+: 0)}\label{group__block_ga3b14a086973dff06815f999b6c873429}
Returns the value of the S\+Z\+X-\/field of a Block option {\ttfamily opt}. 

\subsection{Function Documentation}
\hypertarget{group__block_ga44c746196920a4ea3cd6e2f5df78c046}{}\index{Block Transfer@{Block Transfer}!coap\+\_\+add\+\_\+block@{coap\+\_\+add\+\_\+block}}
\index{coap\+\_\+add\+\_\+block@{coap\+\_\+add\+\_\+block}!Block Transfer@{Block Transfer}}
\subsubsection[{coap\+\_\+add\+\_\+block}]{\setlength{\rightskip}{0pt plus 5cm}int coap\+\_\+add\+\_\+block (
\begin{DoxyParamCaption}
\item[{{\bf coap\+\_\+pdu\+\_\+t} $\ast$}]{pdu, }
\item[{unsigned int}]{len, }
\item[{const unsigned char $\ast$}]{data, }
\item[{unsigned int}]{block\+\_\+num, }
\item[{unsigned char}]{block\+\_\+szx}
\end{DoxyParamCaption}
)}\label{group__block_ga44c746196920a4ea3cd6e2f5df78c046}
Adds the {\ttfamily block\+\_\+num} block of size 1 $<$$<$ ({\ttfamily block\+\_\+szx} + 4) from source {\ttfamily data} to {\ttfamily pdu}.


\begin{DoxyParams}{Parameters}
{\em pdu} & The message to add the block \\
\hline
{\em len} & The length of {\ttfamily data}. \\
\hline
{\em data} & The source data to fill the block with \\
\hline
{\em block\+\_\+num} & The actual block number \\
\hline
{\em block\+\_\+szx} & Encoded size of block {\ttfamily block\+\_\+number} \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
{\ttfamily 1} on success, {\ttfamily 0} otherwise. 
\end{DoxyReturn}
\hypertarget{group__block_ga265adcc610026896a5e8a046bcc359ca}{}\index{Block Transfer@{Block Transfer}!coap\+\_\+get\+\_\+block@{coap\+\_\+get\+\_\+block}}
\index{coap\+\_\+get\+\_\+block@{coap\+\_\+get\+\_\+block}!Block Transfer@{Block Transfer}}
\subsubsection[{coap\+\_\+get\+\_\+block}]{\setlength{\rightskip}{0pt plus 5cm}int coap\+\_\+get\+\_\+block (
\begin{DoxyParamCaption}
\item[{{\bf coap\+\_\+pdu\+\_\+t} $\ast$}]{pdu, }
\item[{unsigned short}]{type, }
\item[{{\bf coap\+\_\+block\+\_\+t} $\ast$}]{block}
\end{DoxyParamCaption}
)}\label{group__block_ga265adcc610026896a5e8a046bcc359ca}
Initializes {\ttfamily block} from {\ttfamily pdu}. {\ttfamily type} must be either C\+O\+A\+P\+\_\+\+O\+P\+T\+I\+O\+N\+\_\+\+B\+L\+O\+C\+K1 or C\+O\+A\+P\+\_\+\+O\+P\+T\+I\+O\+N\+\_\+\+B\+L\+O\+C\+K2. When option {\ttfamily type} was found in {\ttfamily pdu}, {\ttfamily block} is initialized with values from this option and the function returns the value {\ttfamily 1}. Otherwise, {\ttfamily 0} is returned.


\begin{DoxyParams}{Parameters}
{\em pdu} & The pdu to search for option {\ttfamily type}. \\
\hline
{\em type} & The option to search for (must be C\+O\+A\+P\+\_\+\+O\+P\+T\+I\+O\+N\+\_\+\+B\+L\+O\+C\+K1 or C\+O\+A\+P\+\_\+\+O\+P\+T\+I\+O\+N\+\_\+\+B\+L\+O\+C\+K2) \\
\hline
{\em block} & The block structure to initilize. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
{\ttfamily 1} on success, {\ttfamily 0} otherwise. 
\end{DoxyReturn}
\hypertarget{group__block_gaac6c90297abc6e2da80a6212b0d10e99}{}\index{Block Transfer@{Block Transfer}!coap\+\_\+opt\+\_\+block\+\_\+num@{coap\+\_\+opt\+\_\+block\+\_\+num}}
\index{coap\+\_\+opt\+\_\+block\+\_\+num@{coap\+\_\+opt\+\_\+block\+\_\+num}!Block Transfer@{Block Transfer}}
\subsubsection[{coap\+\_\+opt\+\_\+block\+\_\+num}]{\setlength{\rightskip}{0pt plus 5cm}unsigned int coap\+\_\+opt\+\_\+block\+\_\+num (
\begin{DoxyParamCaption}
\item[{const {\bf coap\+\_\+opt\+\_\+t} $\ast$}]{block\+\_\+opt}
\end{DoxyParamCaption}
)}\label{group__block_gaac6c90297abc6e2da80a6212b0d10e99}
Returns the value of field {\ttfamily num} in the given block option {\ttfamily block\+\_\+opt}. \hypertarget{group__block_ga0750df07c7545ffade46ba6669aa5b54}{}\index{Block Transfer@{Block Transfer}!coap\+\_\+write\+\_\+block\+\_\+opt@{coap\+\_\+write\+\_\+block\+\_\+opt}}
\index{coap\+\_\+write\+\_\+block\+\_\+opt@{coap\+\_\+write\+\_\+block\+\_\+opt}!Block Transfer@{Block Transfer}}
\subsubsection[{coap\+\_\+write\+\_\+block\+\_\+opt}]{\setlength{\rightskip}{0pt plus 5cm}int coap\+\_\+write\+\_\+block\+\_\+opt (
\begin{DoxyParamCaption}
\item[{{\bf coap\+\_\+block\+\_\+t} $\ast$}]{block, }
\item[{unsigned short}]{type, }
\item[{{\bf coap\+\_\+pdu\+\_\+t} $\ast$}]{pdu, }
\item[{size\+\_\+t}]{data\+\_\+length}
\end{DoxyParamCaption}
)}\label{group__block_ga0750df07c7545ffade46ba6669aa5b54}
Writes a block option of type {\ttfamily type} to message {\ttfamily pdu}. If the requested block size is too large to fit in {\ttfamily pdu}, it is reduced accordingly. An exception is made for the final block when less space is required. The actual length of the resource is specified in {\ttfamily data\+\_\+length}.

This function may change $\ast$block to reflect the values written to {\ttfamily pdu}. As the function takes into consideration the remaining space {\ttfamily pdu}, no more options should be added after \hyperlink{group__block_ga0750df07c7545ffade46ba6669aa5b54}{coap\+\_\+write\+\_\+block\+\_\+opt()} has returned.


\begin{DoxyParams}{Parameters}
{\em block} & The block structure to use. On return, this object is updated according to the values that have been written to {\ttfamily pdu}. \\
\hline
{\em type} & C\+O\+A\+P\+\_\+\+O\+P\+T\+I\+O\+N\+\_\+\+B\+L\+O\+C\+K1 or C\+O\+A\+P\+\_\+\+O\+P\+T\+I\+O\+N\+\_\+\+B\+L\+O\+C\+K2 \\
\hline
{\em pdu} & The message where the block option should be written. \\
\hline
{\em data\+\_\+length} & The length of the actual data that will be added the {\ttfamily pdu} by calling \hyperlink{group__block_ga44c746196920a4ea3cd6e2f5df78c046}{coap\+\_\+add\+\_\+block()}. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
{\ttfamily 1} on success, or a negative value on error. 
\end{DoxyReturn}
