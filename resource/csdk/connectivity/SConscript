##
# CA build script
##

Import('env')

target_os = env.get('TARGET_OS')
transport = env.get('TARGET_TRANSPORT')

print "Given Transport is %s" % transport
print "Given OS is %s" % target_os

if 'ALL' in transport:
	if target_os == 'linux':
		env.AppendUnique(CPPDEFINES = ['WIFI_ADAPTER', 'ETHERNET_ADAPTER','NO_EDR_ADAPTER','NO_LE_ADAPTER'])
	elif target_os == 'tizen':
		env.AppendUnique(CPPDEFINES = ['WIFI_ADAPTER', 'NO_ETHERNET_ADAPTER','EDR_ADAPTER','LE_ADAPTER'])
	else:
		env.AppendUnique(CPPDEFINES = ['WIFI_ADAPTER', 'ETHERNET_ADAPTER','EDR_ADAPTER','LE_ADAPTER'])
	print "CA Transport is ALL"
else:
	if 'BT' in transport:
		env.AppendUnique(CPPDEFINES = ['EDR_ADAPTER'])
		print "CA Transport is BT"
	else:
		env.AppendUnique(CPPDEFINES = ['NO_EDR_ADAPTER'])

	if 'BLE' in transport:
		env.AppendUnique(CPPDEFINES = ['LE_ADAPTER'])
		print "CA Transport is BLE"
	else:
		env.AppendUnique(CPPDEFINES = ['NO_LE_ADAPTER'])

	if 'WIFI' in transport:
		env.AppendUnique(CPPDEFINES = ['WIFI_ADAPTER'])
		print "CA Transport is WIFI"
	else:
		env.AppendUnique(CPPDEFINES = ['NO_WIFI_ADAPTER'])
	if 'ETHERNET' in transport:
		env.AppendUnique(CPPDEFINES = ['ETHERNET_ADAPTER'])
		print "CA Transport is ETHERNET"
	else:
		env.AppendUnique(CPPDEFINES = ['NO_ETHERNET_ADAPTER'])

env.SConscript('./src/SConscript')

